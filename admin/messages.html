<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/public/css/dashboard.css">
    <link rel="stylesheet" href="/public/css/message.css">
    <link rel="icon" href="/images/user.png" type="image/png">
    <link rel="stylesheet" href="/public/css/fontawesome-free-6.5.1-web\css\all.min.css">
    <script>
        const getLoginToken = () => {
    const name = 'loginToken=';
    const decodedCookie = decodeURIComponent(document.cookie);
    const cookieArray = decodedCookie.split(';');
    
    for (let i = 0; i < cookieArray.length; i++) {
        let cookie = cookieArray[i];
        while (cookie.charAt(0) === ' ') {
            cookie = cookie.substring(1);
        }
        if (cookie.indexOf(name) === 0) {
            return cookie.substring(name.length, cookie.length);
        }
    }
    
    return ''; 
}


const isLoggedIn=()=>{
    try{
    fetch('https://portfolio-back-end-1-pm2e.onrender.com/brand/isloggedin',{
        method:'post',
        headers:{
            'Content-Type':'application/json',
            'Authorization': `Bearer ${getLoginToken()}`
            }
    })
    .then(response=>{
        response.json()
        .then(res=>{
            if(response.status!=200){
                window.location='../index.html' 
            }
        })
    })
}
catch(error){
    console.log(error)
}
}
    </script>
    <title>Rodrigue - Messages</title>
</head>
<body onload="isLoggedIn(), getMessage()">
    <div class="sidebar">
        <div class="brandname">RWIGARA Rodrigue</div>
        <div class="menu">
            <a  href="/admin/Admin.html">Home</a>
            <a href="/admin/about.html">About</a>
            <a  href="#skills">Skills</a>
            <a href="/admin/portfolio.html">Portfolio</a>
            <a class="active" href="#" onclick="showMessage()">Messages</a>
            <a href="/admin/blogs.html">Blogs</a>
            <a href="#" onclick="logout()">Logout</a>
        </div>
    </div>

    <div class="content">
       
                <h1>Messages</h1>
                
            </header>
            <main>
                <div id="side" class="message-container">
                    <!-- Messages will be rendered here -->
                </div>
          
        
            
        
    </div>

    <div class="footer">
        <div class="left-footer">
            <h5>Copyright@rwigararodrigue</h5>
            <div class="social-icons">
                <i class="fab fa-facebook"></i>
                <i class="fab fa-instagram"></i>
                <i class="fab fa-twitter"></i>
                <i class="fab fa-linkedin"></i>
                <i class="fab fa-github"></i>
            </div>
        </div>
        <div class="right-footer">
           
        </div>
    </div>

    

    <script src="/public/js/admin.js"></script>
    <script src="/public/js/index.js"></script>
    <script src="/public/js/isAuthenticated.js" defer></script>
</body>
</html>
