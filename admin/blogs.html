<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/public/css/fontawesome-free-6.5.1-web\css\all.min.css" >
    <link rel="stylesheet" href="/public/css/blogs.css">
    <link rel="stylesheet" href="/public/css/responsiveness.css">
    <script src="/public/js/adiminBlogs.js"></script>
    <script>
      const getLoginToken = () => {
    const name = 'loginToken=';
    const decodedCookie = decodeURIComponent(document.cookie);
    const cookieArray = decodedCookie.split(';');
    
    for (let i = 0; i < cookieArray.length; i++) {
        let cookie = cookieArray[i];
        while (cookie.charAt(0) === ' ') {
            cookie = cookie.substring(1);
        }
        if (cookie.indexOf(name) === 0) {
            return cookie.substring(name.length, cookie.length);
        }
    }
    
    return ''; 
}


const isLoggedIn=()=>{
    try{
    fetch('https://portfolio-back-end-1-pm2e.onrender.com/brand/isloggedin',{
        method:'post',
        headers:{
            'Content-Type':'application/json',
            'Authorization': `Bearer ${getLoginToken()}`
            }
    })
    .then(response=>{
        response.json()
        .then(res=>{
            if(response.status!=200){
                window.location='../index.html' 
            }
        })
    })
}
catch(error){
    console.log(error)
}
}
    </script>
    <title>Blogs</title>
</head>
<body onload="isLoggedIn(), displayBlogs()">
  <a href="/admin/Admin.html">Back home</a>
  <div class="blogs" id="blog">
      
    <h2 class="page-title">Explore Blogs </h2>
    <div class="article-holder" id="blogs-container">
    </div>
    <div class="container">
      <h1>Add New Blog</h1>
      <form  id="add-blog-form">
          <label for="title">Title:</label>
          <input type="text" id="title" name="title" required>
          
          <label for="content">Content:</label>
          <textarea id="content" name="content" required></textarea>
          
          <label for="image">Upload Image:</label>
          <input type="file" id="image" name="image" accept="image/*" required>
          
          <button type="submit" onclick="addNewBlog()">Add Blog</button>
      </form>
      
  </div>
   </div>
        
       </div>
   
    
</body>
</html>